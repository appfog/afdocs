<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>AppFog &mdash; Documentation PHP</title> 

		<link rel="stylesheet" href="http://appfog.com/css/style.css">
		<link href="/css/prettify.css" type="text/css" rel="stylesheet" />
		<link href="/css/table.css" rel="stylesheet">
		<link href="/css/docs.css" rel="stylesheet">
		<!-- typekit -->
		<script type="text/javascript" src="http://use.typekit.com/abw3xjt.js"></script>
		<script type="text/javascript">try{Typekit.load();}catch(e){}</script>
				
		<!-- css -->

		<!-- modernizr -->
		<script src="http://appfog.com/js/libs/modernizr-2.5.3.min.js"></script>

		<script type="text/javascript" src="/js/google-code-prettify/prettify.js"></script>
		<script type="text/javascript" src="/js/jquery.js"></script>
		<script type="text/javascript" src="/js/bootstrap.js"></script>

		<!--  -->
		<link rel="icon" type="image/png" href="http://appfog.com/favicon.ico" />
		
		<script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-16856502-8']);
      _gaq.push(['_setDomainName', '.appfog.com']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
		
	</head>
	<body id="blog" onload="prettyPrint()">
	<div id="header">
		<div class="container">
			<a href="http://appfog.com/" id="app_fog"><img src="http://appfog.com/img/app-fog.png" width="189" height="47" alt="App Fog"></a>
			<ul id="main_nav">
				<li id="nproducts">
					<a href="#" title="Products" class="parent"><span>Products</span></a>
					<ul>
						<li><a href="http://appfog.com/products/appfog">AppFog</a></li>
						<li><a href="http://appfog.com/products/phpfog">PHP Fog</a></li>
					</ul>
				</li>
				<li id="npricing">
					<a href="#" title="Pricing" class="parent"><span>Pricing</span></a>
					<ul>
						<li><a href="https://console.appfog.com/pricing">AppFog</a></li>
						<li><a href="http://appfog.com/products/phpfog/pricing/">PhpFog</a></li>
					</ul>
				</li>
				<li id="nshowcase"><a href="http://appfog.com/showcase/" title="Showcase">Showcase</a></li>
				<li id="nabout"><a href="http://appfog.com/about/" title="About">About</a></li>
				<li id="nsupport"><a href="http://appfog.com/support/" title="Support">Support</a></li>
				<li id="nblog"><a href="http://blog.appfog.com/" title="Blog">Blog</a></li>

				<li id="nlogin">
						  <a href="#" title="Log In" class="btn gray">Log In <i class="icon-chevron-down"></i></a>
						  <form id="log_in_form" class="dropdown">
							<div class="container">
							  <!-- <div class="half">
								<div class="radio_btn" id="log_in_product_php_fog">
								  <span>
									<input type="radio" name="products" value="" id="log_in_php_fog" checked>
								  </span>
								  <label for="log_in_php_fog">Php Fog</label>
								</div>
							  </div>
							  <div class="half">
								<div class="radio_btn" id="log_in_product_appfog">
								  <span>
									<input type="radio" name="products" value="" id="log_in_appfog">
								  </span>
								  <label for="log_in_appfog">AppFog</label>
								</div>
								
							  </div>
							</div> -->
										
							<!-- <hr> -->

							<!-- <div class="container appfog">
							  <input type="email" name="email" value="" id="appfog_log_in_email" placeholder="Email" class="text">
							  <input type="password" name="password" value="" id="appfog_log_in_password" placeholder="Password" class="text">
							</div>
							
							<div class="container php_fog">
							  <input type="email" name="email" value="" id="php_fog_log_in_email" placeholder="Email" class="text">
							  <input type="password" name="password" value="" id="php_fog_log_in_password" placeholder="Password" class="text">
							</div> -->
										

										
							<!-- <div class="container">  
							  <div class="half">
								<div class="checkbox">
								  <span class="active">
									<input type="checkbox" name="remember_me" value="" id="log_in_remember_me" checked>
								  </span>
								</div>
								<label for="log_in_remember_me" class="remember_me">Remember Me</label>
							  </div>

							  <div class="half forgot_password">
								<a href="#">Forgot Password?</a>
							  </div>
							</div> -->
										<a href="https://phpfog.com/login" class="btn bright_green submit" style="font-size: 13px;">Log In to PHP Fog</a>
										<hr>
										<a href="https://console.appfog.com/login" class="btn bright_green submit" style="font-size: 13px;">Log In to AppFog</a>
									</form>
								</li>
								<li id="nsignup">
									<a href="#" title="Sign Up" class="btn bright_green">Sign Up <i class="icon-chevron-down"></i></a>
									<form id="sign_up_form" class="dropdown">
							<!-- <div class="container">
							  <div class="half">
								<div class="radio_btn" id="sign_up_product_php_fog">
								  <span>
									<input type="radio" name="products" value="" id="sign_up_php_fog" checked>
								  </span>
								  <label for="sign_up_php_fog">Php Fog</label>
								</div>
							  </div>
							  <div class="half">
								<div class="radio_btn" id="sign_up_product_appfog">
								  <span>
									<input type="radio" name="products" value="" id="sign_up_appfog">
								  </span>
								  <label for="sign_up_appfog">AppFog</label>
								</div>
								
							  </div>
							</div> -->
										
										<!-- <hr>
													
													<div class="container php_fog">
													  <input type="email" name="email" value="" id="sign_up_php_fog_email" placeholder="Email" class="text">
													  <input type="password" name="password" value="" id="sign_up_password" placeholder="Password" class="text">
													  <input type="password" name="password_confirmation" value="" id="sign_up_password_confirmation" placeholder="Password Confirmation" class="text">
													</div>
													
													<div class="container appfog">
													  <input type="email" name="email" value="" id="sign_up_appfog_email" placeholder="Email" class="text">
													</div> -->
										
										<a href="https://phpfog.com/signup" class="btn bright_green submit" style="font-size: 13px;">Register for PHP Fog</a>
										<hr>
										<a href="http://appfog.com/signup.php" class="btn bright_green submit" style="font-size: 13px;">Register for AppFog</a>
									</form>
								</li>

			</ul>
		</div> 
	</div>
	<div id="main_content">
		<div class='container'>

			
			<div id="top_bar" class="row gray_blue margin_bottom">
				<div class="span12">
					<a href="/"><h1 class="title">AppFog Docs</h1></a>
					<ul id="docs_nav">
						
						<li class="breadcrumb-separator">&raquo;</li>
						<li><a href="/frameworks">Frameworks</a></li>
						
						<li class="breadcrumb-separator">&raquo;</li>
						<li><a href="#">PHP</a></li>
					</ul>
					<ul id="secondary_nav">
						<li><a href="http://docs.phpfog.com">PHP Fog Docs</a></li>
					</ul>
				</div>

			</div>
			
					


			<div id="content" class="row white">
				<div class="span8 main_content">
					<div class="row entries">
	<div class="span8">
		<div class="row">
			<div class="span8">
				<h1>PHP</h1>
				<ul>
  <li><a href="#custom">Custom PHP App</a></li>
  <li><a href="#drupal">Drupal</a></li>
  <li><a href="#wordpress">WordPress</a></li>
  <li><a href="#php_ini">php.ini</a></li>
  <li><a href="#docroot">Document Root</a></li>
</ul>

<h3 id="supported-versions">Supported Versions</h3>

<p>For the most reliable experience, make sure you have the same version of PHP installed on your local development environment as the target AppFog instance. You can check the available runtimes by running: </p>

<pre class="prettyprint"><code>$ af runtimes

+--------------+-----------------+-----------+
| Name         | Description     | Version   |
+--------------+-----------------+-----------+
| java         | Java 7          | 1.7.0     |
| php          | PHP 5           | 5.3       |
| ruby18       | Ruby 1.8.7      | 1.8.7     |
| ruby192      | Ruby 1.9.2      | 1.9.2p180 |
| ruby193      | Ruby 1.9.3 p125 | 1.9.3     |
| python2      | Python 2.7.3    | 2.7.3     |
| node04       | Node.js 0.4.12  | 0.4.12    |
| node06       | Node.js 0.6.17  | 0.6.17    |
| erlangR14B02 | Erlang R14B02   | R14B02    |
+--------------+-----------------+-----------+
</code></pre>

<p>AppFog supports PHP with <code>Apache 2.2.22</code> and <code>mod_php</code>. You can take a closer look at the PHP and Apache configurations <a href="http://phpinfo.aws.af.cm/info.php">here</a>.</p>

<h3 id="persistent-data-storage">Persistent Data Storage</h3>

<p>AppFog does not yet have a persistent data storage system, though we’re working on it. This means that the file system is volatile and any data that needs to be persistent should be included in the code base (by making all changes in a local development environment) or offloaded to a database or an external storage system like Amazon’s S3.  </p>

<h3 id="services">Services</h3>

<p>You can connect your PHP app to AppFog services by using the <code>VCAP_SERVICES</code> environment variable, which becomes available to your app when you bind a service to it. You can access the variable in PHP like this: </p>

<pre class="prettyprint"><code>getenv('VCAP_SERVICES')
</code></pre>

<p>For more information on this, check out our <a href="/services/overview">Services Overview</a> page.</p>

<h1 id="custom">Custom PHP App</h1>

<h3 id="create-the-app">Create the App</h3>

<p>Create a directory for the app and change into it:</p>

<pre class="prettyprint"><code>$ mkdir php-example
$ cd php-example
</code></pre>

<p>Create an <code>index.php</code> file with the following:</p>

<pre class="prettyprint linenums"><code>&lt;?php echo "Hello world!"; ?&gt;
</code></pre>

<h3 id="deploy-to-appfog">Deploy to AppFog</h3>

<pre class="prettyprint"><code>$ af push php-example
Would you like to deploy from the current directory? [Yn]:
Detected a PHP Application, is this correct? [Yn]:
Application Deployed URL [php-example.aws.af.cm]:
Memory reservation (128M, 256M, 512M, 1G, 2G) [128M]:
How many instances? [1]:
Bind existing services to 'php-example'? [yN]:
Create services to bind to 'php-example'? [yN]:
Would you like to save this configuration? [yN]:
Creating Application: OK
Uploading Application:
    Checking for available resources: OK
    Packing application: OK
    Uploading (0K): OK
Push Status: OK
Staging Application 'php-example': OK
Starting Application 'php-example': OK
</code></pre>

<pre class="prettyprint"><code>$ af curl php-example.aws.af.cm
Hello world!% 
</code></pre>

<h1 id="drupal">Drupal</h1>

<p>The following is a step-by-step guide to deploying a Drupal app to AppFog.</p>

<h3 id="download-drupal">Download Drupal</h3>

<p><a href="http://drupal.org/project/download/">Download Drupal</a>, unzip it to a new directory, and change into that directory.</p>

<p>Then create your <code>settings.php</code> file:</p>

<pre class="prettyprint"><code>$ cp ./sites/default/default.settings.php ./sites/default/settings.php
</code></pre>

<h3 id="services-1">Services</h3>

<p>In <code>settings.php</code>, replace <code>$databases = array();</code> with:</p>

<pre class="prettyprint linenums"><code>$services = getenv('VCAP_SERVICES'); 
$services_json = json_decode($services,true); 
$mysql_config = $services_json["mysql-5.1"][0]["credentials"]; 
$databases['default']['default'] = array( 
    'driver' =&gt; 'mysql',
    'database' =&gt; $mysql_config["name"],
    'username' =&gt; $mysql_config["user"],
    'password' =&gt; $mysql_config["password"],
    'host' =&gt; $mysql_config["hostname"],
    'port' =&gt; $mysql_config["port"],
);
</code></pre>

<h3 id="deploy-to-appfog-1">Deploy to AppFog</h3>

<p>Push your code, making sure to create and bind a new MySQL service to the app:</p>

<pre><code>$ af push
</code></pre>

<h3 id="finish-the-drupal-install">Finish the Drupal Install</h3>

<p>Point your browser to your app’s install script, in this case drupal-example.aws.af.cm/install.php. That should take you through the rest of the install process. </p>

<h3 id="further-developement">Further Developement</h3>

<p>AppFog does not yet have a persistent data storage system, though we’re working on it. This means that the file system is volatile and any changes made to the file system by the app will be lost on an app start, stop, or deploy. </p>

<p>This means you should do any development that makes changes to the file system in a local development environment and then push those changes to AppFog using an <code>af update</code>. You can sync any database changes by <a href="/services/tunneling">tunneling</a>.</p>

<h1 id="wordpress">WordPress</h1>

<p>The following is a step-by-step guide to deploying a WordPress app to AppFog.</p>

<h3 id="download-wordpress">Download Wordpress</h3>

<p><a href="http://wordpress.org/download/">Download WordPress</a>, unzip it to a new directory, and change into that directory.</p>

<p>Then create your <code>wp-config.php</code> file:</p>

<pre class="prettyprint"><code>$ cp wp-config-sample.php wp-config.php
</code></pre>

<h3 id="services-2">Services</h3>

<p>In <code>wp-config.php</code>, replace: </p>

<pre class="prettyprint linenums"><code>/** The name of the database for WordPress */
define('DB_NAME', 'database_name_here');

/** MySQL database username */
define('DB_USER', 'username_here');

/** MySQL database password */
define('DB_PASSWORD', 'password_here');

/** MySQL hostname */
define('DB_HOST', 'localhost');
</code></pre>

<p>with: </p>

<pre class="prettyprint linenums"><code>define('DB_NAME', $mysql_config["name"]);
define('DB_USER', $mysql_config["user"]);
define('DB_PASSWORD', $mysql_config["password"]);
define('DB_HOST', $mysql_config["hostname"]);
define('DB_PORT', $mysql_config["port"]);
</code></pre>

<h3 id="deploy-to-appfog-2">Deploy to AppFog</h3>

<pre class="prettyprint"><code>$ af push wordpress-example
Would you like to deploy from the current directory? [Yn]:
Detected a PHP Application, is this correct? [Yn]:
Application Deployed URL [wordpress-example.aws.af.cm]:
Memory reservation (128M, 256M, 512M, 1G, 2G) [128M]:
How many instances? [1]:
Bind existing services to 'wordpress-example'? [yN]:
Create services to bind to 'wordpress-example'? [yN]: y
1: mongodb
2: mysql
3: postgresql
What kind of service?: 2
Specify the name of the service [mysql-d197d]:
Create another? [yN]:
Would you like to save this configuration? [yN]:
Creating Application: OK
Creating Service [mysql-d197d]: OK
Binding Service [mysql-d197d]: OK
Uploading Application:
    Checking for available resources: OK
    Processing resources: OK
    Packing application: OK
    Uploading (5M): OK
Push Status: OK
Staging Application 'wordpress-example': OK
Starting Application 'wordpress-example': OK
</code></pre>

<h3 id="finish-the-wordpress-install">Finish the WordPress Install</h3>

<p>Point your browser to your app’s install script, in this case wordpress-example.aws.af.cm/wp-admin/install.php. That should take you through the rest of the install process. </p>

<h3 id="further-development">Further Development</h3>

<p>AppFog does not yet have a persistent data storage system, though we’re working on it. This means that the file system is volatile and any changes made to the file system by the app will be lost on an app start, stop, or deploy. </p>

<p>This means you should do any development that makes changes to the file system in a local development environment and then push those changes to AppFog using an <code>af update</code>. You can sync any database changes by <a href="/services/tunneling">tunneling</a>.</p>

<h1 id="php_ini"><code>php.ini</code></h1>

<p>AppFog does not support direct access to <code>php.ini</code>. However, the <code>AllowOverride</code> directive in <code>php.ini</code> is set to “<code>All</code>” which enables you to set the values of the directives in your <code>.htaccess</code> or in your PHP file via <code>ini_set()</code>.</p>

<h3 id="setting-values-htaccess">Setting Values <code>.htaccess</code></h3>

<p>Setting the value of a directive in <code>.htaccess</code> is easy. Simply place the following line of code in your <code>.htaccess</code> file, and insert the name and value of the directive you want to use:</p>

<pre class="prettyprint"><code>php_value &lt;name&gt; &lt;value&gt;
</code></pre>

<p>For more information on this topic, check out the following references: </p>

<ul>
  <li><a href="http://php.net/manual/en/configuration.changes.php">How to change configuration settings</a></li>
  <li><a href="http://davidwalsh.name/php-values-htaccess">Set php.ini Values Using .htaccess</a></li>
</ul>

<h3 id="setting-values-using-iniset">Setting Values Using <code>ini_set()</code></h3>

<p>Please consult the <a href="http://www.php.net/manual/en/function.ini-set.php">PHP manual on <code>ini_set()</code></a>.</p>

<h1 id="docroot">Document Root</h1>

<p>You can modify your document root using by adding the following into your <code>.htaccess</code>:</p>

<pre class="prettyprint"><code>RewriteEngine on
RewriteCond %{HTTP_HOST} ^domain.com$ [NC,OR]
RewriteCond %{HTTP_HOST} ^www.domain.com$
RewriteCond %{REQUEST_URI} !public/
RewriteRule (.*) /public/$1 [L]
</code></pre>


			</div>
		</div>
	</div>
</div>

				</div>

				<div class="span3 sidebar padding accordion" id="accordion2">
					<!--
					<div class="row border-bottom">
						<div class="span3">
							<form id="search-form" action="/search">
								<input type="search" placeholder="Search" id="search" name="q" size="30" />
								<input class="btn gray_blue search" type="submit" value="Go" />
							</form>
						</div>
					</div>-->
					<div class="accordion-group">
						<div class="row border-bottom accordion-heading">
							<div class="span3">
								<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne"><h6><i class="accordion-icon icon-chevron-right"></i> Getting Started</h6></a>
							</div>
						</div>
						
						<ul class="pages accordion-body collapse" id="collapseOne" style="height: 0;">
						
							<div class="accordion-inner">
								
								<li><a href="/getting-started/jumpstarts" >Jumpstarts</a></li>
								
								<li><a href="/getting-started/af-cli" >AF Command Line Tool</a></li>
								
							</div>
						</ul>
					</div>
					<div class="accordion-group">
						<div class="row border-bottom accordion-heading">
						<div class="span3">
								<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo"><h6><i class="accordion-icon icon-chevron-down"></i> Frameworks</h6></a>
							</div>
						</div>
						
						<ul class="pages accordion-body collapse in" id="collapseTwo" style="height: auto;">
						
							<div class="accordion-inner">
							
							<li><a href="/frameworks/node" >Node</a></li>
							
							<li><a href="/frameworks/php" class="on">PHP</a></li>
							
							<li><a href="/frameworks/python" >Python</a></li>
							
							<li><a href="/frameworks/ruby" >Ruby</a></li>
							
							</div>
						</ul>
					</div>

					<div class="accordion-group">
						<div class="row border-bottom accordion-heading">
							<div class="span3">
								<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseThree"><h6><i class="accordion-icon icon-chevron-right"></i> Services</h6></a>
							</div>
						</div>
						
						<ul class="pages accordion-body collapse" id="collapseThree" style="height: 0;">
						
							<div class="accordion-inner">
							
							<li><a href="/services/overview" >Overview</a></li>
							
							<li><a href="/services/tunneling" >Tunneling</a></li>
							
							<li><a href="/services/mysql" >MySQL</a></li>
							
							<li><a href="/services/mongodb" >MongoDB</a></li>
							
							</div>
						</ul>
					</div>

						<div class="row border-bottom"><div class="span3"><a href="/add-on-partners" ><h6>Add-on Partnership</h6></div></a></div>
						<div class="row border-bottom"><div class="span3"><a href="/faq" ><h6>FAQ</h6></div></a></div>
						<div class="row border-bottom"><div class="span3"><a href="http://console.appfog.com/pricing"><h6>Pricing</h6></a></div></div>
						<div class="row border-bottom"><div class="span3"><a href="/billing" ><h6>BILLING</h6></div></a></div>
						<div class="row border-bottom"><div class="span3"><a href="/troubleshooting" ><h6>Troubleshooting</h6></div></a></div>
						<div class="row border-bottom"><div class="span3"><a href="/architecture" ><h6>Architecture</h6></div></a></div>

					</div>
				</div>
			</div><!-- content -->
		</div><!-- container -->
	</div><!-- main_content -->

	<div id="footer">
		<div class="container">
			<div class="row">
				<div class="span1">
					<img src="http://appfog.com/img/bydevfordev_95.png" width="95" height="79" alt="By Developers For Developers" id="badge">
				</div>
				<div class="span3">
					<h4>About AppFog</h4>
					<p>Easily build and deploy fast, scalable, and reliable applications to the cloud in seconds. Yeah, it’s that easy.</p>					
				</div>
				<div class="span2">
					<h4>Info</h4>
					<ul>
						<li><a href="http://appfog.com/support/">Support</a></li>
						<li><a href="https://appfog.com/about/">About</a></li>
						<li><a href="http://dev.appfog.com/">Documentation</a></li>
					</ul>
				</div>
				<div class="span2 offsettop">
					<ul>
						<li>Phone: 1.888.974.7364</li>
						<li>&copy; <script>document.write(new Date().getFullYear());</script> AppFog.</li>
						<li>All Rights Reserved.</li>
					</ul>
				</div>
				<div class="span4">
					<h4>Social</h4>
					<ul id="social">
						<li id="facebook"><a href="http://www.facebook.com/pages/AppFog/159333004147490">Facebook</a></li>
						<li id="twitter"><a href="https://twitter.com/#!/appfog">Twitter</a></li>
						<li id="linkedin"><a href="http://www.linkedin.com/company/appfog">LinkedIn</a></li>
					</ul>
				</div>
			</div>
		</div> <!-- / .container -->
	</div>
	
	
<!-- scripts -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://appfog.com/js/libs/jquery-1.7.1.min.js"><\/script>')</script>
<script src="http://appfog.com/js/plugins.js"></script>
<script src="http://appfog.com/js/script.js"></script>
<script type="text/javascript" src="/js/docs.js"></script>

</body>
</html>
